---
# Global benchmarking options.
global:

  # Global benchmark option defaults.
  # Will be overwritten by local options specified per-benchmark.
  benchmark:
    warmup: 1
    runs: 5
    capture_output: false

  # Script hooks for benchmark lifecycle
  scripts:
    setup: ./scripts/setup.sh
    prepare: ./scripts/prepare.sh
    conclude: ./scripts/conclude.sh
    cleanup: ./scripts/cleanup.sh

  # A command wrapper for benchmarks.
  wrapper: "taskset -c 1-14"

  # Path to source code (required).
  # Can point to a local or online fork of bitcoin/bitcoin.
  source: $HOME/src/core/bitcoin
 
  # The directory binaries will be built into
  scratch: $HOME/.local/state/benchkit/scratch

  # Commits to build binaries from (required).
  commits: ["746ab19d5a13c98ae7492f9b6fb7bd6a2103c65d" ]

  # A temporary datadir for Bitcoin Core to use
  tmp_data_dir: /tmp/benchkit

  # The host architecture to build for
  host: x86_64-linux-gnu

# Local benchmark config.
benchmarks:
  # benchmark name (required).
  - name: "assumeutxo signet test sync"

    # Bitcoin network to run on (main, test, testnet4, signet, regtest)
    network: signet

    # An optional address for bitcoind to -connect to for sync
    connect: 127.0.0.1:39333

    # Local benchmark options.
    # These override global benchmark options in case of conflict.
    benchmark:
      # The correct binary for the [commit] will be substituted and the
      # (bitcoin) [network] applied automatically. {dbcache} is an explicit
      # (additional) parameterisation from [parameter_lists] below.
      command: "bitcoind -dbcache={dbcache} -stopatheight=170001"
      warmup: 0
      runs: 2

      # A list of zero or more parameters.
      # These will be tried as a matrix.
      parameter_lists:
        # The variable name to use in command substitution.
        - var: dbcache
          # A list of values to substitute in.
          values: ["450", "32000"]
